(function(t){function e(e){for(var a,l,o=e[0],d=e[1],u=e[2],s=0,b=[];s<o.length;s++)l=o[s],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&b.push(c[l][0]),c[l]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);r&&r(e);while(b.length)b.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var d=n[o];0!==c[d]&&(a=!1)}a&&(i.splice(e--,1),t=l(l.s=n[0]))}return t}var a={},c={app:0},i=[];function l(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=a,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,function(e){return t[e]}.bind(null,a));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var r=d;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"50d1":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),c=(n("b0c0"),{class:"main"}),i={class:"mainControls"},l=Object(a["f"])("Страница: "),o=Object(a["g"])("th",null,"Наименование",-1),d=Object(a["g"])("th",null,"Площадь",-1),u=Object(a["g"])("th",null,[Object(a["f"])("Цена на м"),Object(a["g"])("sup",null,"2")],-1),r=Object(a["g"])("th",null,"Цена",-1),s={key:0},b={key:0},g=Object(a["g"])("sup",null,"2",-1),j={key:1},O={key:2},p={key:3},f={key:4},h={key:5},v={key:6},m={class:"controls"},k={class:"totalCost"},w=Object(a["g"])("td",null,"Общая цена",-1),y=Object(a["g"])("td",null,null,-1),P=Object(a["g"])("td",null,null,-1),C={key:0},E={key:0,class:"overlay"},D={key:0,class:"overlay"};function S(t,e,n,S,W,A){var N=Object(a["o"])("add-window"),_=Object(a["o"])("add-page-window");return Object(a["i"])(),Object(a["d"])("div",c,[Object(a["g"])("div",i,[Object(a["g"])("div",null,[Object(a["g"])("label",null,[l,Object(a["t"])(Object(a["g"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return S.currentPage=t}),onChange:e[2]||(e[2]=function(){return A.updatePage&&A.updatePage.apply(A,arguments)})},[(Object(a["i"])(!0),Object(a["d"])(a["a"],null,Object(a["m"])(A.pageNames(),(function(t){return Object(a["i"])(),Object(a["d"])("option",{value:t,key:t},Object(a["p"])(t),9,["value"])})),128))],544),[[a["r"],S.currentPage]])]),Object(a["g"])("button",{onClick:e[3]||(e[3]=function(e){return t.showAddWindow=!0}),class:"add"},"Добавить запись")]),Object(a["g"])("div",null,[Object(a["g"])("button",{onClick:e[4]||(e[4]=function(e){return t.showAddPageWindow=!0})},"Добавить страницу"),Object(a["g"])("button",{onClick:e[5]||(e[5]=function(){return A.editPage&&A.editPage.apply(A,arguments)})},"Изменить текущую страницу"),Object(a["g"])("button",{onClick:e[6]||(e[6]=function(){return A.deletePage&&A.deletePage.apply(A,arguments)})},"Удалить текущую страницу")]),Object(a["g"])("div",null,[Object(a["g"])("button",{onClick:e[7]||(e[7]=function(){return S.screenshot&&S.screenshot.apply(S,arguments)})},"Снимок текущей страницы")])]),Object(a["g"])("table",null,[Object(a["g"])("tr",null,[o,d,u,r,S.isScreenshotting?Object(a["e"])("",!0):(Object(a["i"])(),Object(a["d"])("th",s,"Управление"))]),(Object(a["i"])(!0),Object(a["d"])(a["a"],null,Object(a["m"])(S.data[S.currentPage],(function(t){return Object(a["i"])(),Object(a["d"])("tr",{key:t.name},[Object(a["g"])("td",null,Object(a["p"])(t.name),1),t.cost?(Object(a["i"])(),Object(a["d"])("td",j)):(Object(a["i"])(),Object(a["d"])("td",b,[Object(a["f"])(Object(a["p"])(t.area)+" м",1),g])),t.cost?(Object(a["i"])(),Object(a["d"])("td",p)):(Object(a["i"])(),Object(a["d"])("td",O,Object(a["p"])(t.costPMSQ)+" руб.",1)),t.cost?(Object(a["i"])(),Object(a["d"])("td",h,Object(a["p"])(t.cost)+" руб.",1)):(Object(a["i"])(),Object(a["d"])("td",f,Object(a["p"])(Math.round(t.area*t.costPMSQ*1e3)/1e3)+" руб. ",1)),S.isScreenshotting?Object(a["e"])("",!0):(Object(a["i"])(),Object(a["d"])("td",v,[Object(a["g"])("div",m,[Object(a["g"])("button",{onClick:function(e){return A.editItem(t.name)}},"🖉",8,["onClick"]),Object(a["g"])("button",{onClick:function(e){return A.deleteItem(t.name)},class:"delete"},"✖",8,["onClick"])])]))])})),128)),Object(a["g"])("tr",k,[w,y,P,Object(a["g"])("td",null,Object(a["p"])(A.totalCost())+" руб.",1),S.isScreenshotting?Object(a["e"])("",!0):(Object(a["i"])(),Object(a["d"])("td",C))])]),Object(a["g"])(a["b"],{name:"fade"},{default:Object(a["s"])((function(){return[t.showAddWindow?(Object(a["i"])(),Object(a["d"])("div",E,[Object(a["g"])(N,{addCallback:A.addNewItem,isEditing:t.isEditing,editingData:t.editingData,editCallback:A.editItem,cancelCallback:A.cancelCallback},null,8,["addCallback","isEditing","editingData","editCallback","cancelCallback"])])):Object(a["e"])("",!0)]})),_:1}),Object(a["g"])(a["b"],{name:"fade"},{default:Object(a["s"])((function(){return[t.showAddPageWindow?(Object(a["i"])(),Object(a["d"])("div",D,[Object(a["g"])(_,{addCallback:A.addNewPage,isEditing:t.isEditingPage,editingData:t.pageEditingData,editCallback:A.editPage,cancelCallback:A.cancelCallback},null,8,["addCallback","isEditing","editingData","editCallback","cancelCallback"])])):Object(a["e"])("",!0)]})),_:1})])}n("b64b"),n("c740"),n("a434");var W=Object(a["v"])("data-v-0bb9968c");Object(a["k"])("data-v-0bb9968c");var A=Object(a["g"])("label",{for:"name"},"Наименование: ",-1),N=Object(a["g"])("label",{for:"customCost"},"Нестандартный предмет",-1),_={key:0},x=Object(a["g"])("label",{for:"area"},[Object(a["f"])("Площадь (в м"),Object(a["g"])("sup",null,"2"),Object(a["f"])("): ")],-1),M={key:1},I=Object(a["g"])("label",{for:"costPMSQ"},[Object(a["f"])("Цена на м"),Object(a["g"])("sup",null,"2"),Object(a["f"])(": ")],-1),F={key:2},Q=Object(a["g"])("label",{for:"cost"},"Цена: ",-1),U={class:"controls"};Object(a["j"])();var q=W((function(t,e,n,c,i,l){var o=Object(a["o"])("window");return Object(a["i"])(),Object(a["d"])(o,{title:n.isEditing?"Изменить запись":"Добавить запись"},{default:W((function(){return[Object(a["g"])("form",null,[Object(a["g"])("ul",null,[Object(a["g"])("li",null,[A,Object(a["g"])("input",{type:"text",name:"name",placeholder:"Например, Штукатурка",value:n.isEditing?n.editingData.name:null,required:""},null,8,["value"])]),Object(a["g"])("li",null,[Object(a["t"])(Object(a["g"])("input",{type:"checkbox",name:"customCost","onUpdate:modelValue":e[1]||(e[1]=function(t){return c.customCost=t})},null,512),[[a["q"],c.customCost]]),N]),c.customCost?Object(a["e"])("",!0):(Object(a["i"])(),Object(a["d"])("li",_,[x,Object(a["g"])("input",{type:"text",name:"area",placeholder:"Например, 2.5",value:n.isEditing?n.editingData.area:null,required:""},null,8,["value"])])),c.customCost?Object(a["e"])("",!0):(Object(a["i"])(),Object(a["d"])("li",M,[I,Object(a["g"])("input",{type:"text",name:"costPMSQ",placeholder:"Например, 10",value:n.isEditing?n.editingData.costPMSQ:null,required:""},null,8,["value"])])),c.customCost?(Object(a["i"])(),Object(a["d"])("li",F,[Q,Object(a["g"])("input",{type:"text",name:"cost",placeholder:"Например, 75",value:n.isEditing?n.editingData.cost:null,required:""},null,8,["value"])])):Object(a["e"])("",!0),Object(a["g"])("li",U,[Object(a["g"])("input",{type:"button",value:n.isEditing?"Изменить":"Добавить",onClick:e[2]||(e[2]=Object(a["u"])((function(t){return l.parse()}),["prevent"]))},null,8,["value"]),Object(a["g"])("input",{type:"button",value:"Отмена",onClick:e[3]||(e[3]=Object(a["u"])((function(){return n.cancelCallback&&n.cancelCallback.apply(n,arguments)}),["prevent"]))})])])])]})),_:1},8,["title"])})),B=(n("99af"),n("a15b"),Object(a["v"])("data-v-eddd706e")),$=B((function(t,e,n,c,i,l){return Object(a["i"])(),Object(a["d"])("div",null,[Object(a["g"])("h2",null,Object(a["p"])(n.title),1),Object(a["n"])(t.$slots,"default",{},void 0,!0)])})),J={name:"Window",props:{title:String}};n("ca68");J.render=$,J.__scopeId="data-v-eddd706e";var L=J,T={components:{Window:L},name:"AddWindow",props:{addCallback:Function,isEditing:Boolean,editingData:Object,editCallback:Function,cancelCallback:Function},setup:function(t){var e=Object(a["l"])(!1);return null!==t.editingData&&t.editingData.cost&&(e.value=!0),{customCost:e}},methods:{parse:function(){var t=document.getElementsByName("name")[0].value;if(this.customCost)var e=parseFloat(document.getElementsByName("cost")[0].value);else var n=parseFloat(document.getElementsByName("area")[0].value),a=parseFloat(document.getElementsByName("costPMSQ")[0].value);var c,i=!0,l=[];(0===t.length&&(i=!1,l.push("Наименование")),this.customCost?isNaN(e)&&(i=!1,l.push("Цена")):(isNaN(n)&&(i=!1,l.push("Площадь")),isNaN(a)&&(i=!1,l.push("Цена на м2"))),i)?(c=this.customCost?{name:t,cost:e}:{name:t,area:n,costPMSQ:a},this.isEditing?this.editCallback(this.editingData.name,c):this.addCallback(c)):alert("Проверьте написание пол".concat(1===l.length?"я":"ей"," ").concat(l.join(", "),"."))}}};n("c9b5");T.render=q,T.__scopeId="data-v-0bb9968c";var V=T,R=Object(a["v"])("data-v-c350f254");Object(a["k"])("data-v-c350f254");var z=Object(a["f"])(" Название: "),G={class:"controls"};Object(a["j"])();var H=R((function(t,e,n,c,i,l){var o=Object(a["o"])("window");return Object(a["i"])(),Object(a["d"])(o,{title:n.isEditing?"Изменить страницу":"Добавить страницу"},{default:R((function(){return[Object(a["g"])("form",null,[Object(a["g"])("ul",null,[Object(a["g"])("li",null,[Object(a["g"])("label",null,[z,Object(a["g"])("input",{type:"text",required:"",name:"name",value:n.isEditing?n.editingData.name:null},null,8,["value"])])]),Object(a["g"])("li",G,[Object(a["g"])("input",{type:"button",value:n.isEditing?"Изменить":"Добавить",onClick:e[1]||(e[1]=Object(a["u"])((function(){return l.parse&&l.parse.apply(l,arguments)}),["prevent"]))},null,8,["value"]),Object(a["g"])("input",{type:"button",value:"Отмена",onClick:e[2]||(e[2]=Object(a["u"])((function(){return n.cancelCallback&&n.cancelCallback.apply(n,arguments)}),["prevent"]))})])])])]})),_:1},8,["title"])})),K={name:"AddPageWindow",components:{Window:L},props:{addCallback:Function,isEditing:Boolean,editingData:Object,editCallback:Function,cancelCallback:Function},methods:{parse:function(){var t=document.getElementsByName("name")[0].value,e=!0,n=[];0===t.length&&(e=!1,n.push("Наименование")),e?this.isEditing?this.editCallback(this.editingData.name,{name:t}):this.addCallback({name:t}):alert("Проверьте написание пол".concat(1===n.length?"я":"ей"," ").concat(n.join(", "),"."))}}};n("f650");K.render=H,K.__scopeId="data-v-c350f254";var X=K,Y=n("c0e9"),Z=n.n(Y),tt=n("aeb1"),et=n.n(tt),nt={components:{AddWindow:V,AddPageWindow:X},name:"App",data:function(){return{showAddWindow:!1,isEditing:!1,editingData:null,showAddPageWindow:!1,isEditingPage:!1,pageEditingData:null}},setup:function(){var t,e=Object(a["l"])(!1);t=void 0!==localStorage.data?JSON.parse(localStorage.data):{"Стандартная страница":[]};var n=Object(a["l"])(Object.keys(t)[0]);function c(){localStorage.data=JSON.stringify(t)}function i(){e.value=!0,Object(a["h"])().then((function(){Z()(document.querySelector("table")).then((function(t){et()(t.toDataURL(),n.value),e.value=!1}))}))}return window.addEventListener("beforeunload",c),window.addEventListener("keydown",(function(t){"F2"===t.key&&(t.preventDefault(),i())})),{data:t,save:c,isScreenshotting:e,currentPage:n,screenshot:i}},methods:{addNewItem:function(t){this.data[this.currentPage].push(t),this.showAddWindow=!1,this.$forceUpdate(),this.save()},addNewPage:function(t){Object.defineProperty(this.data,t.name,{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.$forceUpdate(),this.save(),this.showAddPageWindow=!1},editItem:function(t,e){var n=this.data[this.currentPage].findIndex((function(e){return e.name===t}));e?(this.data[this.currentPage][n]=e,this.isEditing=!1,this.editingData=null,this.showAddWindow=!1,this.$forceUpdate()):(this.editingData=this.data[this.currentPage][n],this.isEditing=!0,this.showAddWindow=!0)},editPage:function(t,e){if(e){Object.defineProperty(this.data,e.name,{enumerable:!0,configurable:!0,writable:!0,value:this.data[this.currentPage]});var n=this.currentPage;this.currentPage=e.name,delete this.data[n],this.showAddPageWindow=!1,this.$forceUpdate()}else this.isEditingPage=!0,this.pageEditingData={name:this.currentPage},this.showAddPageWindow=!0},deleteItem:function(t){if(window.confirm("Вы действительно хотите удалить эту запись?")){var e=this.data[this.currentPage].findIndex((function(e){return e.name===t}));this.data[this.currentPage].splice(e,1),this.$forceUpdate()}},deletePage:function(){window.confirm("Вы действительно хотите удалить текущую страницу ("+this.currentPage+")?")&&(delete this.data[this.currentPage],this.currentPage=Object.keys(this.data)[0])},updatePage:function(){},cancelCallback:function(){this.isEditing=!1,this.editingData=null,this.showAddWindow=!1,this.isEditingPage=!1,this.pageEditingData=null,this.showAddPageWindow=!1},totalCost:function(){var t=0;for(var e in this.data[this.currentPage]){var n=this.data[this.currentPage][e];n.cost?t+=n.cost:t+=n.area*n.costPMSQ}return Math.round(1e3*t)/1e3},pageNames:function(){return Object.keys(this.data)}}};n("7f81");nt.render=S;var at=nt;document.title="Смета",Object(a["c"])(at).mount("#app")},"7f81":function(t,e,n){"use strict";n("ad13")},"82c2":function(t,e,n){},ad13:function(t,e,n){},c90e:function(t,e,n){},c9b5:function(t,e,n){"use strict";n("82c2")},ca68:function(t,e,n){"use strict";n("50d1")},f650:function(t,e,n){"use strict";n("c90e")}});
//# sourceMappingURL=app.d79b4bb7.js.map